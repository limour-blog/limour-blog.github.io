---
title: 【记录】将旧手机变成云手机
urlname: convert-old-phone-to-cloud-phone
index_img: https://api.limour.top/randomImg?d=2024-12-25 13:04:41
date: 2024-12-25 21:04:41
tags: novnc
---
## 准备工作
+ [ADB 调试](./force-enable-adb-wireless-debugging)

## scrcpy 方案
+ 下载 [scrcpy](https://github.com/Genymobile/scrcpy/releases)
+ 也可以[内网穿透](./WebSocket-based-intranet-penetration-tool)，那么修改下面的 IP 和端口为穿透后的 IP 和端口
+ 使用 `scrcpy` 目录下的 adb 执行 `.\adb.exe connect 192.168.110.105:35555`
+ 执行 `.\scrcpy.exe --new-display --no-vd-destroy-content`

![](https://img.limour.top/2024/12/25/676c0984bff5f.webp)

+ 修改 `scrcpy-console.bat` 如下，则可关闭物理屏幕
```cmd
@echo off
scrcpy --turn-screen-off --new-display --no-vd-destroy-content --pause-on-exit=if-error %*
```

## Droidvnc 方案
+ 下载 [droidvnc-ng](https://github.com/bk138/droidVNC-NG/releases)
```bash
adb install -t 'droidvnc-ng-2.8.0.apk'
```
+ 关闭 `droidvnc-ng` 电池优化，并在自启动里手动管理允许所有启动方式
+ `PackageViewer` 获取 `droidvnc-ng` 的包名为 `net.christianbeier.droidvnc_ng`
```bash
# 查看 droidvnc_ng 的所有服务，自行判断哪个是无障碍服务
# 比如 `net.christianbeier.droidvnc_ng/.InputService`
# 一般是有 `android.permission.BIND_ACCESSIBILITY_SERVICE` 权限的那个
adb shell dumpsys activity services net.christianbeier.droidvnc_ng
# 或者手动开启一次无障碍服务，然后直接找到对应的服务
# 比如 `net.christianbeier.droidvnc_ng/net.christianbeier.droidvnc_ng.InputService`
adb shell settings get secure enabled_accessibility_services
# 执行下面的命令进行保活
adb shell pm grant net.christianbeier.droidvnc_ng/net.christianbeier.droidvnc_ng.InputService android.permission.BIND_ACCESSIBILITY_SERVICE
adb shell pm grant net.christianbeier.droidvnc_ng/net.christianbeier.droidvnc_ng.InputService android.permission.WRITE_SECURE_SETTINGS
adb shell settings put secure enabled_accessibility_services net.christianbeier.droidvnc_ng/net.christianbeier.droidvnc_ng.InputService
# 验证无障碍服务打开情况
adb shell settings get secure enabled_accessibility_services
```

+ 浏览器访问 `http://192.168.110.105:5800/vnc.html?autoconnect=true&autoscale=1&show_dot=true&port=5900` 即可
+ 内网穿透后可远程使用