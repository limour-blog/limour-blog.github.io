---
title: 【记录】永续合约市场的实践经验
urlname: practical-experience-in-perpetual-contract-market
index_img: https://api.limour.top/randomImg?d=2025-09-30 07:47:48
date: 2025-09-30 15:47:48
tags: dex
---
## 准备工作
+ [中心化交易所](https://www.binance.com) C2C入金 
+ 安装 [MetaMask](https://metamask.io) 钱包的浏览器插件
+ [去中心化交易所](https://app.hyperliquid.xyz) 进行合约交易
+ U卡进行出金消费
## 市场假设
1. 有效市场假设：价格反应了市场上的所有信息，长期主要趋势无法被操纵
2. 价格分布假设：价格由供需关系和随机波动构成，供需关系服从偏态分布，可由`EMA`捕获
3. 流动性假设：价格会向流动性高的地方游走，并短暂停留
## 盈利原理
1. 局部概率优势：整体对庄家有利的游戏，在不洗牌的前提下，对庄家有利的牌出现频率越高，后续对玩家有利的牌出现频率越高
2. 注意：概率优势具有非传递性，对于骰子`A=(3,3,3,3,3,3)`、`B=(6,5,2,2,2,2`)、`C=(4,4,4,4,1,1)`，计算可得，A胜B概率为66%，B胜C概率56%，C胜A概率为66%
## 复利有限
1. 胜率、盈亏比、开单频率构成不可能三角
2. 所有策略存在管理资金的容量上限
3. 策略资金容量有限，管理资金的增长满足 Logistic 曲线，保持一半策略资金容量能获得最大年化收益率。
## 仓位管理
+ 以损定仓：止损不得超过总资金的2%，以此计算每次的仓位
## 简单推论
1. 根据流动性假设，当期权名义金额不足以影响市场时，价格会向着使大多数期货合约止损的位置游走
2. 根据流动性假设，当期权名义金额较大时，价格会向着当日期权最大痛点游走
## 策略构建
+ 根据价格分布假设，构建多EMA均线系统捕获供需关系
```js
//@version=6
indicator("副图指标", overlay=false, max_boxes_count = 500)
import TradingView/ta/10

ma1 = ta.ema(hlcc4, 3)
ma2 = ta.dema(hlcc4, 5)
ma3 = ta.dema(hlcc4, 7)
ma4 = ta.dema(hlcc4, 11)
ma5 = ta.dema(hlcc4, 13)
ma6 = ta.dema(hlcc4, 17)
plot(ma1, color = color.aqua)
plot(ma2, color = color.aqua)
plot(ma3, color = color.aqua)
plot(ma4, color = color.aqua)
plot(ma5, color = color.aqua)
plot(ma6, color = color.aqua)

ma7 = ta.ema(hlcc4, 19)
ma8 = ta.ema(hlcc4, 23)
ma9 = ta.ema(hlcc4, 29)
ma10 = ta.ema(hlcc4, 31)
ma11 = ta.ema(hlcc4, 37)
ma12 = ta.ema(hlcc4, 41)
plot(ma7, color = color.red)
plot(ma8, color = color.red)
plot(ma9, color = color.red)
plot(ma10, color = color.orange)
plot(ma11, color = color.orange)
plot(ma12, color = color.orange)


ma13 = ta.ema(hlcc4, 43)
ma14 = ta.ema(hlcc4, 47)
ma15 = ta.ema(hlcc4, 53)
ma16 = ta.ema(hlcc4, 59)
ma17 = ta.ema(hlcc4, 61)
ma18 = ta.ema(hlcc4, 67)
plot(ma13, color = color.yellow)
plot(ma14, color = color.yellow)
plot(ma15, color = color.yellow)
plot(ma16, color = color.green)
plot(ma17, color = color.green)
plot(ma18, color = color.green)


ma19 = ta.ema(hlcc4, 71)
ma20 = ta.ema(hlcc4, 73)
ma21 = ta.ema(hlcc4, 79)
ma22 = ta.ema(hlcc4, 83)
ma23 = ta.ema(hlcc4, 89)
ma24 = ta.ema(hlcc4, 97)
plot(ma19, color = color.blue)
plot(ma20, color = color.blue)
plot(ma21, color = color.blue)
plot(ma22, color = color.purple)
plot(ma23, color = color.purple)
plot(ma24, color = color.purple)
```
+ 根据价格分布假设，构建均线发散系统捕获随机波动导致的超买超卖
```js
maArray = array.from(ma1, ma2, ma3, ma4, ma5, ma6, ma7, ma8, ma9, ma10, ma11, ma12, ma13, ma14, ma15, ma16, ma17, ma18, ma19, ma20, ma21, ma22, ma23, ma24)

maMin = array.min(maArray)
maMax = array.max(maArray)

plot(math.abs(close - open), title="vix", style=plot.style_columns, color=close > open ? color.lime : color.red)

mavix = (maMax - maMin)
plot(mavix,  "MAVIX", color=color.olive)
mavixma = ta.ema(mavix, 9)
plot(mavixma, "MAVIX_Signal", color=color.blue)

plot(ta.atr(200), "ATR", color=color.aqua)

qq_t = time(timeframe.period)
qq_day = dayofweek(qq_t)
qq_isWeekend = (qq_day == dayofweek.saturday or qq_day == dayofweek.sunday)
barcolor(qq_isWeekend ? color.gray : na)
```
## 做多规则
### 抄底规则
+ 待补充
### 追涨规则
+ 待补充
## 做空规则
### 摸顶规则
+ 待补充
### 杀跌规则
+ 待补充